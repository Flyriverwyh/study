#磁盘组成
 - 磁盘的物理组成，包括盘片等
 - 盘片上是数据，可能有多个盘片，盘片上面分为扇区和柱面，柱面由扇区组成，扇区大小固定，一般 512 bytes。
 - 整块磁盘的0磁头、0柱面、0扇区（思考这几个数字在磁盘中作用）特别重要，记录磁盘的重要信息，主要记录了
    * 主引导分区（master boot record，MBR）：可以安装引导加载程序的地方，446bytes。
    * 分区表（partition table）：记录了整块硬盘分区的状态，64bytes。
 - 硬盘只有进行分区才能进行使用，分区信息记录在分区表。  
  
#磁盘分区表（partition table）
 - 柱面是分区、文件系统的最小单位，根据柱面号码进行处理的。
 - 分区表的64bytes，分为4组记录区，这四组信息成为主（Primary）或扩展（Extended）分区，每组记录了该区段的启动与结束柱面。   
![磁盘分区表](images/pt1.PNG "磁盘分区表")
```
假设一块硬盘/dev/hda，柱面区间是1-400，第一扇区的分区表记录的四组记录是：P1（1-100）、P2（101-200）、P3（201-300）、
P4（301-400），那么：
    * 在Linux系统中，这四个分区对应的设备名称分别是P1:/dev/hda1,P2:/dev/hda2,P3:/dev/hda3,P4:/dev/hda4
    * 在Windows系统中，四个分区的代号应该是C、D、E、F，当数据写入F盘，那么数据就写入了磁盘的301-400柱面。    
```  
 - 分区作用，可以从数据安全性（分区之间不影响）和性能（数据读取锁定柱面范围）角度考虑。
 - 柱面由扇区组成，第一扇区可以利用额外的扇区记录分区信息，从而达到不止四个分区。
 - 扩展分区目的是使用额外的扇区来记录分区信息，扩展分区本身不能用来初始化。扩展分区指向的区块继续分区出**逻辑分区**，逻辑分区使用的范围就是扩展分区指定的范围。  
![磁盘分区表](images/pt2.PNG "磁盘分区表")
上述分区在Linux系统中设备名称如下：
```
 - P1:/dev/hda1
 - P2:/dev/hda2
 - L1:/dev/hda5
 - L2:/dev/hda6
 - L3:/dev/hda7
 - L4:/dev/hda8
 - L5:/dev/hda9

注：从上面命名可以看出来，前四个号码都是保留给primary或extended用的，所以逻辑分区设备从5开始
```
 - primary和extended分区最多有四个（硬盘限制）
 - extended分区最多一个（操作系统限制）
 - 逻辑分区由扩展分区继续切割出来的分区
 - 能够初始化的分区为主分区和逻辑分区，扩展分区不可初始化
 - 逻辑分区数量根据操作系统不同而不同。Linux中，IDE硬盘最多59个逻辑分区（5-63），SATA有11个（5-15）
 
#开机流程
简单来讲，开机流程如下：
```
1.BIOS：开机主动执行的韧体，取得能够开机的硬盘，并且读取该硬盘的第0扇区的MBR位置
2.MBR：第一个可开机设备的第一个扇区内的主引导分区块，里面包含引导加载程序（Boot loader）
3.引导加载程序（Boot loader）：可读取内核文件来执行的软件。该软件由操作系统在安装在MBR上面，所以会识别硬盘的文件系统格式，因此可以读取内核文件
4.内核文件：开始操作系统的功能

注：BIOS和MBR由硬件支持，Boot loader操作系统提供
```
Boot loader主要工作：
```
- 提供菜单：不同开机选项，也是多重引导的重要功能
- 载入内核文件：直接指向可开机的程序区段来开始操作系统
- 转交给其他loader：
```
引导加载分区除了安装在MBR，还可以安装在**每个分区**的引导扇区（boot sector）。分区有自己的启动扇区，这个特点造就“多重引导”功能。

假设计算机有一块硬盘，分为四个分区，其中第一第二分区分别安装Windows以及Linux，如何在开机时候选择Linux或Windows开机？假设MBR内安装的是可同时识别Windows/Linux系统的引导加载程序，整个流程如图：    
![引导程序工作流程](images/boot1.PNG "引导程序工作流程")
