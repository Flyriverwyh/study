

# 整体介绍

`Virtualization/Learning/KVM实战: 原理、进阶与性能调优/第3篇 KVM虚拟化技术/第5章 qemu-kvm虚拟化解决方案/5. KVM内核模块重要流程的分析.md`

![2019-12-11-11-04-37.png](./images/2019-12-11-11-04-37.png)

```
vmx_init()                               // kvm-intel.ko模块初始化
 ├─ kvm_init(KVM_GET_API_VERSION)        // 初始化KVM框架
 |   ├─ kvm_arch_init()                  // 初始化KVM框架
 |   ├─ kvm_irqfd_init()                 // 初始化KVM框架
 |   ├─ kvm_arch_hardware_setup()        // 初始化KVM框架
 |   ├─ smp_call_function_single()       // 对每个online cpu
 |   ├─ cpuhp_setup_state_nocalls()      // 初始化KVM框架
 |   ├─ register_reboot_notifier()       // 初始化KVM框架
 |   ├─ kvm_cache_create_usercopy()      // 初始化KVM框架
 |   ├─ kvm_async_pf_init()              // 初始化KVM框架
 |   ├─ misc_register()                  // 注册字符设备文件/dev/kvm 
 |   ├─ register_syscore_ops()           // 初始化KVM框架
 |   ├─ kvm_init_debug()                 // 初始化KVM框架
 |   └─ kvm_vfio_ops_init()
 ├─ vmx_setup_l1d_flush()                // 初始化KVM框架
 └─ vmx_check_vmcs12_offsets()
```

