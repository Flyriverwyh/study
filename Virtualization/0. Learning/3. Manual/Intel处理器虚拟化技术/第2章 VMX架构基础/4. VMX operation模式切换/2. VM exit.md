

在**VM**中, **guest软件**无法知道**自己是否处于VM**之中(Intel保证guest软件没有任何途径可以检测). 因此, **guest软件不可能主动放弃控制权进行"VM exit"操作(！！！**).

只有**guest软件**遇到一些**无条件VM exit事件**或**VMM的设置**引发VM exit的条件发生, VM才在不知不觉中失去了控制, VMM将接管. **guest软件**也**无法知道自己什么时候发生了VM exit行为**.

导致VM exit发生的**三大途径**如下.

① 执行**无条件引发VM exit的指令**, 包括**CPUID**, **GETSEC**, **INVD**与**XSETBV指令**, 以及**所有VMX指令(除了VMFUNC指令外**)

② 遇到**无条件引发VM exit**的**未被阻塞的事件**. 例如, **INIT信号**, **SIPI消息**等.

③ 遇到**VMM设置引发VM exit的条件**, 包括**执行某些指令**或**遇到某些事件**发生. 譬如, **VMM设置**了"**HLT exiting**"条件, 而**guest软件执行了HLT指令**而引发VM exit. 又如, VM遇到了external\-interrupt的请求, VMM设置了"external\-interrupt exiting"条件而导致VM exit.

........
