


```cpp
// arch/x86/include/uapi/asm/processor-flags.h
#define X86_CR4_VMXE_BIT    13 /* enable VMX virtualization */
#define X86_CR4_VMXE        _BITUL(X86_CR4_VMXE_BIT)

// arch/x86/include/asm/virtext.h

static inline int cpu_vmx_enabled(void)
{
        // 判断 cr4 的vmxe是否置位, 置位返回1, 否则返回0
        return __read_cr4() & X86_CR4_VMXE;
}
```

