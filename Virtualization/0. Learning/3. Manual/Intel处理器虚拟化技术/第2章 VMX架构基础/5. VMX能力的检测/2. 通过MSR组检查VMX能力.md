

而VMX体系结构被设计为**可扩展**的，以便将来VMX操作中的处理器可以支持VMX体系结构的第一代实现中不存在的其他功能。 通过使用一组**VMX功能MSR**将可扩展的VMX功能的**可用性报告**给软件。

从MSR地址`480H`开始对这些MSR进行索引。 **VMX功能MSR是只读的**。 尝试使用`WRMSR`写入它们会产生**一般保护异常**（general-protection exception, `#GP(0)`）。 它们在不支持VMX操作的处理器上不存在。 尝试在此类处理器上读取它们（使用`RDMSR`）会产生一般保护异常（`#GP(0)`）。



VMX 架构提供了众多项目能力的检测, 包括: **VMX的基本信息**、**杂项信息**、**VPID与EPT能力**, 还有对**VMCS内**的`control fields`(**控制字段**)允许设置的位. 控制字段的位**允许被置为1**时, 代表着**处理器拥有这个能力**.

比如, `secondary processor-based control`字段的`bit 7`是"`Unrestricted guest`"位, 当它允许被置为1时, 表明处理器支持 unrestricted guest(不受限制的guest端)功能. 反之, 则表明处理器不支持该功能.

VMX 的这些能力的检测提供在几组共 **14** 个 **MSR**(Model Specific Register)里, 如表2-1, 除了这些, 还有 **4 个扩展**的 **TRUE 系列寄存器**, 详见2.5.4节和2.5.5节

![2020-02-24-22-19-23.png](./images/2020-02-24-22-19-23.png)

......
