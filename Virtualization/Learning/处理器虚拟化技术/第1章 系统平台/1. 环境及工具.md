
# 平台信息和状态

以4个逻辑处理器平台为例, 机器启动后最终进入一个等待状态, 如图.

![2019-12-28-18-06-10.png](./images/2019-12-28-18-06-10.png)

图1-1所显示的信息是处理器最后调用`updata_system_status`例程的结果, 它输出当前系统的信息, 在`lib/crt.asm`模块里实现.

## 处理器编号

## 运行阶段

## 处理器个数

## 处理器模型

## VMX开启

## EPT开启

# 使用VMware

多数例子可以运行在VMware中, 只有少数需要在真实机器上运行. 

下面介绍如何使用VMware运行例子中的`demo.img`映像文件.

运行VMware后, 使用典型配置新建一个虚拟机, 名为"demo". "客户机操作系统"选"其他", 版本为"其他64位". 虚拟机内存使用256MB足够.

接下来设置处理器个数以及虚拟化引擎, 如图1-2.

![2019-12-28-18-16-30.png](./images/2019-12-28-18-16-30.png)

物理处理器数量为1, 处理器核心数量可以根据自己的平台, 这里选4.

假如选择了2个核心数量, 运行demo.img的结果如图: 检测到的CPU个数为2.

![2019-12-28-18-20-56.png](./images/2019-12-28-18-20-56.png)

虚拟化引擎选择"虚拟化Intel VT-x/EPT或AMD-V/RVI(V)". 首选模式选为"intel VT-x/EPT或AMD-V/RVI". 这才能在VMware中使用VMX模式.

在VMware中, 我们使用软盘映像文件demo.img, 这个映像文件位于每个例子目录中. 例如1-4图中的chap07/ex7-5/demo.img.

![2019-12-28-18-29-28.png](./images/2019-12-28-18-29-28.png)

# 使用Bochs

Bochs只支持基本的VMX特性. 所以不使用

# 在真实机器上运行

# Build工具