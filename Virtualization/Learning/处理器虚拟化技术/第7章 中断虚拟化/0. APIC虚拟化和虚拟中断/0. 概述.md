



处理器使用由VMM标识的`virtual APIC page`(**虚拟APIC页面**)跟踪**虚拟APIC的状态**。 `第29.1节`讨论了`virtual APIC page`以及处理器如何使用它来跟踪虚拟APIC的状态。

以下是与APIC虚拟化和中断虚拟化相关的`VM-execution controls`（有关这些控制位的位置，请参见第24.6节）：
* `Virtual-interrupt delivery`(**虚拟中断传递**)。当该控制位使能, 可以**评估和传送pending的虚拟中断**（第29.2节）。它还可以使能对APIC**寄存器写入的模拟**（基于内存映射或基于MSR）, 这些寄存器控制着**中断优先级**。
* `Use TPR shadow`(**使用TPR阴影**)。当此控制位使能，会**模拟**通过**CR8**（第29.3节）以及通过**内存映射**或基于**MSR**的接口(如果使能的话)对APIC的**任务优先级寄存器**（**TPR**）的访问。(而不会导致`vm-exit`).
* `Virtualize APIC accesses`(**虚拟化APIC访问**, 这指的是apic/xapic模式的访问, 和下面的x2APIC冲突)。当该控制位使能, 通过使VM在访问**VMM指定**的`APIC-access page`时发生`vm-exit`，可实现对基于**内存映射**的APIC访问进行虚拟化（第29.4节）。如果设置了某些其他控制位，则可能会导致**模拟其中一些访问**，而**不是导致VM exit**。
* `Virtualize x2APIC mode`(**虚拟化x2APIC模式**, 和上面的冲突)。通过此控制位，可以对基于**MSR**的APIC访问进行虚拟化（第29.5节）。
* `APIC-register virtualization`(**APIC寄存器虚拟化**)。通过从**virtual APIC page**中满足要求，此控制位允许对大多数APIC寄存器（启用）进行**内存映射**和基于**MSR**的读取。它将对`APIC-access page`的内存映射写入定向到**virtual-APIC page**，之后是VM-exit以进行VMM模拟。
* `Process posted interrupts`(**处理通告中断**)。该控制位允许软件在数据结构中发布虚拟中断，并向另一个逻辑处理器发送通知。收到通知后，目标处理器将通过将已发布的中断复制到virtual-APIC page中来对其进行处理（第29.6节）。

“虚拟化APIC访问”，“虚拟化x2APIC模式”，“虚拟中断传递”和“ APIC注册虚拟化”都是`secondary processor-based VM-execution controls`(基于辅助处理器的VM执行控制位)。如果`primary processor-based VM-execution controls`(基于主处理器的VM执行控制位)的位31为0，则处理器将以这些控制位都为0的方式运行。请参见第24.6.2节。